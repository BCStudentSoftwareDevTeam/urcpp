{% extends "base.html" %}
{% set currentPage = "allBudget" %}

{% block body %}
<h1> Budget Summary </h1>

<!-- This is the only actual HTML on the page.
     The rest of it is JavaScript. -->
<div class = "row">
  <table class = " table table-striped">
    <tr>
      <th>Faculty/Proj. Title</th>
      {% for title in cfg["budget"]%}
      <th>
          {{title["title"]}}
      </th>
      {% endfor %}
      <th>Total</th>
    </tr>
    {% for projects in proj%}
      {% set budgetTotal = 0 %}
      <tr id="row{{loop.index0}}">
        <td>
          <!--Fname Lname<br />-->{{projects.title}}
        </td>
        {% for budget in budg %} 
          {% for field in cfg["budget"] %} 
            <td class = "{{field['amountFieldName']}}" id="col{{loop.index0}}">
              {{budget[field['amountFieldName']]}}
            </td>
            {% set budgetTotal = budgetTotal + budget[field['amountFieldName']] %}
            <!--SCOPE!!!!-->
          {% endfor %}
        {% endfor %}
      <td id="budgetTotal{{loop.index0}}">
          <!--{{budgetTotal}} SCOPE!!!!!-->
      </td>
    </tr>
    {% endfor %}
  </table>
</div>


<script>
// NOTE: Working on summing up rows/columns in table
  function addRows(rowNum) {
    var firstRow = $("#row" + rowNum + " td:first"); // Grab all children of a row
    var lastRow =  $("#row" + rowNum + " td:last"); // Grab all children of a row
    console.log(firstRow.val());
    var sum = 0;
    for (i=0; i < row.length; i++) {
      sum = sum + row[i];
    }
    console.log(sum);
    $("#budgetTotal" + rowNum).val(sum);
  };
  
  $(document).ready ( function () {
   addRows(0); 
  });
</script>
{% endblock %}