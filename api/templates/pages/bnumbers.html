{% extends "base.html" %}
{% set currentPage = "bnumbers" %}

{% block title %} Faculty Collaborator(s) B-numbers {% endblock %}

{% block body %}
<ol class="breadcrumb">
  <li><a href="/">Home</a></li>
  <li><a href="/create">Create</a></li>
  <li><a href="/people">People</a></li>
  <li class="active">Bnumbers</li>
</ol>
<div class = "row">
  <div class = "col-sm-8 col-sm-offset-2">
    <h1>Faculty(s)'s B-number </h1>
    
  <form id = "bnumbersForm"
      class = "form-horizontal"
      action = "/bnumbers" 
      method = "POST"
      >
  
    {% for id in range (0, numCollab) %}
      <div class = 'form-group' id = "cgroup{{id}}" style="margin-left:0px;">
        <h4>Collaborator #{{id + 1}}</h4>
          
          <label for='cbnumber{{id}}' class = 'col-sm-3 control-label'>
            B-Number
          </label>
          <div class = 'col-sm-4'>
            <input  name  = 'cbnumbers[]' 
                    id    = 'cbnumber{{id}}' 
                    type  = 'text' 
                    class = 'form-control'
                    placeholder = 'B012345678'
                    value = 
                    "{% if collabs is not none and id < collabs|length %}{{collabs[id].username.bnumber}}{% endif %}"
                    required <!-- is this neeeded? -->
          </div>
      
        </div>
    {% endfor %}
    <div class = "row">
      <div class = "col-sm-1">
        <input type="button" value="Back" onclick="window.history.back()" class="btn btn-primary"/> 
        </input>
      </div>

       <div class = "col-sm-offset-9 col-sm-2" 
         id = "submitButton"
         style="padding-bottom:20px"
         >
      <button id = "first_submit_button" 
              type = "button" 
              class="btn btn-block btn-success"
              onclick = "valid_submit()">
        Submit
      </button>
    </div>
 

<!-- Modal -->
<div class="modal fade" id="bnumber" tabindex="-1" role="dialog" aria-labelledby="bnumber" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="warning" style="text-align:center;">WARNING!</h3>
      </div>
      <div class="modal-body" style="text-align:center;">
        You did not enter a valid B-number! Are you sure you would like to continue?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">No, Go Back</button>
        <button type="button" class="btn btn-success " onclick = "submitData();">Yes, Submit</button>
      </div>
    </div>
  </div>
</div>
</form>

















<script>
  var numCollabs = parseInt("{{numCollab}}");
  var username = "{{username}}";
</script>
{% endblock %}

{% block footer_imports %}
{% for id in range (0, numCollab) %}
<script type = "text/javascript">
              /* global delay, checkValidBNumber, BNUMBERCHECKDELAY */
              $("#cbnumber{{id}}").keyup ( function() {
                delay( function () { 
                          checkValidBNumber("{{id}}"); 
                      }, BNUMBERCHECKDELAY);
              });
            </script>
{% endfor %}
{% endblock %}
