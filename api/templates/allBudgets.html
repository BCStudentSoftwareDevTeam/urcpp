{% extends "base.html" %}
{% set currentPage = "allBudgets" %}

{% block body %}

<h1> Budget Summary </h1>

<!--Menu-->
<ul class="nav nav-tabs">
  {% for menuItem in cfg["committee"] %}
    <li role="presentation"><a href="{{menuItem['link']}}">{{menuItem['title']}}</a></li>
  {% endfor %}
</ul>
<p></p>
<div class = "row" style = "margin-bottom: 20px; margin-top: 20px;"><strong style = "font-size: 125%;">Filter by Status: </strong> 
  {% for status in cfg["projectStatus"] %}
    <input  style = "margin-left: 10px; font-size: 125%;" 
            type="checkbox" 
            name="status" 
            id = "{{status}}"
            value="{{status}}"
            checked
            onchange = "updateFilters();">
    <label  for='{{status}}' 
            class = 'control-label'>
      {{cfg["projectStatus"][status]}}
    </label>
  {% endfor %}
</div>
<p></p>
<div class = "row">
  <table class = "table table-striped table-hover table-sm">
    <tr>
      <th>Faculty/Proj. Title</th>
      <th>Project Status</th>
      {% for title in cfg["budget"]%}
      <th>
        {{title["title"]}}
      </th>
      {% endfor %}
      <th style = "text-align: right; padding-right: 20px;">Total</th>
    </tr>
    {% for person in fac %}
      <tr id="row{{loop.index0}}" name = "leRow">
        <td>
          {{person.username.firstname}} {{person.username.lastname}} <span class = "small">({{person.programID.name}})</span>
          <br />
          <span class = "small">{{person.pID.title|truncate(50, True)}}</span>
        </td>
        <td id = "{{person.pID.pID}}-status" name = "projectStatus">
          {{person.pID.status}}
        </td>
        {% for field in cfg["budget"] %} 
          <td name = "rowValue" 
              class = "{{field['amountFieldName']}}" 
              id = "col{{loop.index0}}" 
              style = "padding-right: 30px; text-align: right;"
              >
            {{person.pID.budgetID[field['amountFieldName']]}}
          </td>
        {% endfor %}
        
        <th id = "rowTotal{{loop.index0}}"
            style = "padding-right: 30px; text-align: right;"
            >
        </th>
      </tr>
    
    {% endfor %}
    
    <tr>
      <th>Total</th>
      <th></th>
      {% for field in cfg["budget"] %} 
      <th id = "columnTotal{{loop.index0}}" 
          style = "padding-right: 30px; text-align: right;"
          >
      </th>
      {% endfor %}
      <th id = "grandTotal"
          style = "padding-right: 30px; text-align: right;"
          >
      </th>
    </tr>
  </table>
</div>


<script>
  var numRows = {{fac|count}};
  $('#incomplete').attr('checked', false);
</script>

{% endblock %}
